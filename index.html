<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoramento Clim√°tico - Parque de Realengo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Roboto', sans-serif; background: linear-gradient(135deg, #74C69D 0%, #2E8B57 100%); margin: 0; padding: 20px; min-height: 100vh; display: flex; justify-content: center; align-items: center; color: #333; }
        .container { max-width: 900px; width: 100%; background-color: rgba(255, 255, 255, 0.95); padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); backdrop-filter: blur(10px); }
        h1 { color: #2E8B57; text-align: center; margin-bottom: 20px; font-weight: 700; font-size: 2.5em; }
        .description { text-align: center; margin-bottom: 30px; font-size: 1.1em; color: #555; }
        .sensors-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .sensor { background: linear-gradient(145deg, #F8F9FA, #E9ECEF); padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; text-align: center; }
        .sensor:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); }
        .sensor h2 { margin-top: 0; color: #2E8B57; font-weight: 500; font-size: 1.2em; display: flex; align-items: center; justify-content: center; }
        .sensor-icon { margin-right: 10px; font-size: 1.5em; }
        .sensor p { margin: 10px 0; font-size: 1.1em; color: #666; }
        .value { font-weight: 700; color: #007BFF; font-size: 1.3em; }
        .recommendation { padding: 20px; border-radius: 12px; font-weight: 500; font-size: 1.2em; text-align: center; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; }
        .recommendation p { margin: 0; }
        .good { background: linear-gradient(145deg, #d4edda, #c3e6cb); border-left: 5px solid #28a745; color: #155724; }
        .warning { background: linear-gradient(145deg, #f8d7da, #f5c6cb); border-left: 5px solid #dc3545; color: #721c24; }
        .rec-icon { margin-right: 10px; font-size: 1.5em; }
        @media (max-width: 768px) { .container { padding: 20px; } h1 { font-size: 2em; } .sensors-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>üå≥ Monitoramento Clim√°tico - Parque de Realengo</h1>
        <p class="description">Monitore o clima e a qualidade do ar no Parque de Realengo, um espa√ßo verde urbano no Rio de Janeiro. Dados em tempo real dos sensores ajudam a preservar a fauna e flora local.</p>
        
        <div class="sensors-grid">
            <div class="sensor" id="uv-sensor">
                <h2><span class="sensor-icon">‚òÄÔ∏è</span> Sensor de UV</h2>
                <p>√çndice UV: <span class="value" id="uv-value">--</span></p>
            </div>
            
            <div class="sensor" id="air-sensor">
                <h2><span class="sensor-icon">üå´Ô∏è</span> Sensor MQ-135 (Qualidade do Ar)</h2>
                <p>N√≠vel de Poluentes: <span class="value" id="air-value">--</span> ppm</p>
            </div>
            
            <div class="sensor" id="rain-sensor">
                <h2><span class="sensor-icon">üåßÔ∏è</span> Sensor de Chuva</h2>
                <p>Status: <span class="value" id="rain-value">--</span></p>
            </div>
            
            <div class="sensor" id="dht-sensor">
                <h2><span class="sensor-icon">üå°Ô∏è</span> Sensor DHT11 (Temperatura e Umidade)</h2>
                <p>Temperatura: <span class="value" id="temp-value">--</span> ¬∞C</p>
                <p>Umidade: <span class="value" id="hum-value">--</span> %</p>
            </div>
        </div>
        
        <div class="recommendation" id="recommendation">
            <p><span class="rec-icon">‚è≥</span> Carregando recomenda√ß√µes...</p>
        </div>
    </div>

    <script>
        // Fun√ß√£o para atualizar os dados dos sensores via ESP8266
        async function updateSensors() {
            try {
                const response = await fetch('/data');
                if (!response.ok) throw new Error('Erro ao obter dados');
                const data = await response.json();
                
                document.getElementById('uv-value').textContent = data.uv || '--';
                document.getElementById('air-value').textContent = data.air || '--';
                document.getElementById('rain-value').textContent = data.rain || '--';
                document.getElementById('temp-value').textContent = data.temp || '--';
                document.getElementById('hum-value').textContent = data.hum || '--';
                
                // L√≥gica para recomenda√ß√µes
                let message = "";
                let className = "";
                let icon = "";
                
                if (data.rain === "Chovendo") {
                    message = "Cuidado chuva! Procure local adequado.";
                    className = "warning";
                    icon = "üåßÔ∏è";
                } else if (data.air > 200) {
                    message = "Qualidade do ar ruim! Crian√ßas, idosos e pessoas com problemas respirat√≥rios evitem atividades f√≠sicas intensas.";
                    className = "warning";
                    icon = "üå´Ô∏è";
                } else if (data.uv > 7) {
                    message = "√çndice de UV alto, use protetor solar e roupas adequadas!";
                    className = "warning";
                    icon = "‚òÄÔ∏è";
                } else {
                    message = "Condi√ß√µes √≥timas para exerc√≠cios ao ar livre!";
                    className = "good";
                    icon = "‚úÖ";
                }
                
                const recDiv = document.getElementById('recommendation');
                recDiv.innerHTML = `<p><span class="rec-icon">${icon}</span> ${message}</p>`;
                recDiv.className = `recommendation ${className}`;
            } catch (error) {
                console.error('Erro ao atualizar sensores:', error);
                document.getElementById('recommendation').innerHTML = '<p><span class="rec-icon">‚ùå</span> Erro ao carregar dados. Verifique a conex√£o.</p>';
            }
        }
        
        setInterval(updateSensors, 5000);
        updateSensors();
    </script>
</body>
</html>
